<!-- <section class="todoapp"> -->

  <header class="header">

    <h1>projects</h1>
      <%= form_for(@project) do |f| %>
        <%= f.text_field :name, :class => "new-todo", :placeholder => (@project.errors.full_messages_for(:name).first || "add a project") %>
        <%= f.submit :style => "display: none" %>
      <% end %>

        <div id="postResult">
          <h2 id="projectName"></h2>
        </div>

    <!-- <script type="text/javascript" charset="utf-8">
      $(function(){
        $("#new_project").on("submit", function(e){
      $.ajax({
        type: ($("input[name='_method']").val() || this.method),
        url: this.action,
        data: $(this).serialize(),
        success: function(response) {
          $('#projectName').val("")
          var $h2 = $(".projects div")
          $h2.append(response)
        }
      })
      e.preventDefault()
      })
      }) -->
      <!-- // $(function () {
      //   $('form').submit(function(event) {
      //     //prevent form from submitting the default way
      //     event.preventDefault();
      //     // alert("we r hack3rz");
      //     var values = $(this).serialize()
      //
      //     var posting = $.post('/projects', values)
      //     // debugger
      //     posting.done(function(data) {
      //       // TODO: handle response
      //       // console.log(data)
      //       var project = data
      //       $("projectName").text(project["name"])
      //     })
      //   });
      // }); -->
    <!-- </script> -->

  </header>

<section class="main">
  <ul class="todo-list">
    <% @projects.each do |project| %>

    <li class = "<%= "completed" if project.complete? %>">
      <div class="view">
        <%= form_for([project]) do |f| %>
          <%= f.check_box :status, :class => "toggle", :checked => (true if project.complete?) %>
        <% end %>
        <input class = "toggle" type="checkbox" <%= "checked='checked'" if project.complete? %>>
        <label><%= link_to project.name, project_path(project) %> <%= link_to("delete", project_path(project), :method => "delete") if project.id %></label>
      </div>
    </li>

    <% end %>
  </ul>
</section>

  <footer class="footer">
    <span class="todo-count">
    <strong><%= @projects.length %></strong>
    <span> </span>
    <span>project(s)</span>
    <span> active</span>
    </span>
    <ul class="filters">
      <li><a href="#/" class="selected">All</a></li>
        <span> </span>
      <li><a href="#/active" class="">Active</a></li>
        <span> </span>
      <li><a href="#/archived" class="">Archived</a></li>
    </ul>
  </footer>
</section>

  <footer class="info">
    <p>You're logged in as: <%= current_user %></p>
    <p><%= link_to "Logout!", logout_path %>
  </footer>
