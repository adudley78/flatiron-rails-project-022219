<!DOCTYPE html>
<section class="todoapp">

  <header class="header">
    <h1>issues</h1>
        <%= form_for([@project, @issue]) do |f| %>
          <%= f.text_field :description, :class => "new-todo", :placeholder => (@issue.errors.full_messages_for(:description).first || "add an issue") %>
          <%= f.hidden_field :user_id, :value => current_user.id %>
          <%= f.submit :style => "display: none" %>
        <% end %>
  </header>

<section class="main">
  <input class = "toggle-all" type="checkbox">
  <label for="toggle-all">Mark all as complete</label>
    <ul class="todo-list">
      <% @project.issues.each do |issue| %>
      <li class = "<%= "completed" if issue.complete? %>">
        <div class="view">
          <%= form_for([issue.project, issue]) do |f| %>

            <%= f.submit issue.status == 1 ? "complete" : "incomplete" %>
          <% end %>

          <label><%= issue.description %></label>
            <%= link_to("delete", project_issue_path(issue.project, issue), :method => "delete") if issue.id %>
        </div>
      </li>
      <% end %>
    </ul>
</section>

  <footer class="footer">
    <span class="todo-count">
      <strong><%= @project.issues.length %></strong>
      <span> </span>
      <span>issue(s)</span>
      <span> active</span>
    </span>
    <ul class="filters">
      <li><a href="#/" class="selected">All</a></li>
        <span> </span>
      <li><a href="#/active" class="">Active</a></li>
        <span> </span>
      <li><a href="#/archived" class="">Archived</a></li>
    </ul>
  </footer>

</section>

<footer class="info">
  <p>Current project: <strong><%= @project.name %></strong></p>
  <p>You're logged in as: <%= current_user.email %></p>
  <p><%= link_to "Logout!", logout_path %>
</footer>
